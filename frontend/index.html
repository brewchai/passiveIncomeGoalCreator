<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Passive Income Goal Tracker - Plan Your Financial Independence Journey</title>
    <meta name="description"
        content="Free passive income calculator and goal tracker. Plan your financial independence with dividend investing, rental income, and multiple income streams. Track your path to financial freedom.">
    <meta name="keywords"
        content="passive income calculator, financial independence, dividend income tracker, rental income planner, FIRE calculator, financial freedom, retirement planning, investment goal tracker">
    <!-- SEO: Canonical and Robots -->
    <link rel="canonical" href="https://your-domain.com/">
    <meta name="robots" content="index, follow">

    <!-- Open Graph -->
    <meta property="og:title" content="Passive Income Goal Tracker">
    <meta property="og:description"
        content="Plan and track your journey to financial independence with dividends, rentals, and more.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://your-domain.com/">
    <meta property="og:image" content="https://your-domain.com/og-image.png">

    <!-- Twitter Cards -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Passive Income Goal Tracker">
    <meta name="twitter:description"
        content="Plan and track your journey to financial independence with dividends, rentals, and more.">
    <meta name="twitter:image" content="https://your-domain.com/og-image.png">

    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- KaTeX for math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css"
        integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV" crossorigin="anonymous">
</head>

<body>
    <div class="container">
        <!-- Step 0: Landing Page -->
        <div class="step active" id="step0">
            <div class="landing-page">
                <div class="landing-hero">
                    <h1 class="landing-title">World's <span class="gradient-text">smartest</span> FIRE planner</h1>
                    <p class="landing-subtitle">The only tool that <strong>tracks
                            net worth and automatically creates
                            milestones</strong> for your life and guides you towards financial independence.
                    </p>

                    <div class="landing-features">
                        <div class="feature-pill">
                            <span class="feature-icon">‚ú®</span>
                            <span>Expense Tracker</span>
                        </div>
                        <div class="feature-pill">
                            <span class="feature-icon">üìä</span>
                            <span>Goal Creator</span>
                        </div>
                        <div class="feature-pill">
                            <span class="feature-icon">üí∞</span>
                            <span>Net Worth Projector</span>
                        </div>
                        <div class="feature-pill">
                            <span class="feature-icon">üè†</span>
                            <span>Retirement Planner</span>
                        </div>
                    </div>

                    <button class="btn-cta" onclick="startBuilder()">
                        Launch FIRE Date Projector
                        <span class="cta-arrow">‚Üí</span>
                    </button>

                    <p class="landing-note">No signup required ‚Ä¢ 100% free ‚Ä¢ Your data stays private</p>

                    <div class="scroll-indicator">
                        <span class="scroll-text">Or scroll to see how it works</span>
                        <span class="scroll-arrow">‚Üì</span>
                    </div>
                </div>

                <div class="landing-how-it-works">
                    <h2>How It Works</h2>
                    <div class="steps-preview">
                        <div class="step-preview-card">
                            <div class="step-number">1</div>
                            <h4>Add Income Sources</h4>
                            <p>Enter your dividend stocks, rental properties, and other passive income streams</p>
                        </div>
                        <div class="step-preview-card">
                            <div class="step-number">2</div>
                            <h4>List Your Expenses</h4>
                            <p>Add monthly expenses‚Äîwe'll automatically create goals from them</p>
                        </div>
                        <div class="step-preview-card">
                            <div class="step-number">3</div>
                            <h4>Track Your Goals</h4>
                            <p>See auto-generated milestones and exact investment amounts needed to achieve them</p>
                        </div>
                    </div>
                </div>

                <div class="landing-benefits">
                    <div class="benefit-card">
                        <div class="benefit-card-icon">‚ú®</div>
                        <h3>Goals Created Automatically</h3>
                        <p>Just enter your expenses‚Äîwe automatically generate tiered financial milestones.
                            No manual goal setting needed. Watch as you progress from covering groceries to achieving
                            complete financial freedom.</p>
                    </div>

                    <div class="benefit-card">
                        <div class="benefit-card-icon">üìà</div>
                        <h3>Track Multiple Income Streams</h3>
                        <p>Monitor dividend-paying stocks, rental properties, royalties, and side businesses. Calculate
                            your blended dividend yield and total monthly passive income automatically.</p>
                    </div>

                    <div class="benefit-card">
                        <div class="benefit-card-icon">üí°</div>
                        <h3>See Exactly What to Invest</h3>
                        <p>Know precisely how much portfolio value you need to reach each milestone.
                            Clear investment targets based on your actual dividend yield‚Äîno guesswork required.</p>
                    </div>
                </div>

                <div class="landing-cta-section">
                    <h2>Start Your Financial Independence Journey Today</h2>
                    <p>Join thousands planning their path to financial freedom through passive income</p>
                    <button class="btn-cta btn-cta-pulse" onclick="startBuilder()">
                        Launch FIRE Date Projector
                        <span class="cta-arrow">‚Üí</span>
                    </button>
                </div>

                <div class="landing-keywords">
                    <p class="keywords-text">
                        <strong>Perfect for:</strong> Financial Independence Retire Early (FIRE), Dividend Growth
                        Investing, Rental Property Income Planning, Retirement Income Strategy, Multiple Income Streams,
                        Wealth Building, Investment Portfolio Tracking, Financial Freedom Planning
                    </p>
                </div>
            </div>
        </div>

        <!-- Progress Indicator (shown from step 1-7) -->
        <div class="progress-indicator" id="progressIndicator" style="display: none;">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-text" id="progressText">Step 1 of 8</div>
        </div>

        <!-- Step 1: Personal and Family Data -->
        <div class="step" id="step1">
            <div class="step-content">
                <h1>Tell Us About Yourself</h1>
                <p class="subtitle">Help us personalize your financial independence journey</p>

                <div class="form-group">
                    <label for="careerField">What's your career field?</label>
                    <input type="text" id="careerField" class="input-field"
                        placeholder="e.g., Software Engineer, Teacher, Business Owner" />
                </div>

                <div class="form-group">
                    <label for="cityLocation">Which city do you live in?</label>
                    <input type="text" id="cityLocation" class="input-field"
                        placeholder="e.g., San Francisco, New York, Austin" />
                </div>

                <div class="form-group">
                    <label for="relationshipStatus">Relationship Status</label>
                    <select id="relationshipStatus" class="input-field">
                        <option value="">Select...</option>
                        <option value="single">Single</option>
                        <option value="married">Married</option>
                        <option value="partnered">Partnered</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="numberOfKids">Number of Kids</label>
                    <input type="number" id="numberOfKids" class="input-field" placeholder="0" min="0" max="20"
                        value="0" />
                </div>

                <div class="form-group">
                    <label for="annualIncome">Total Annual Family Income</label>
                    <input type="number" id="annualIncome" class="input-field" placeholder="150000" min="0"
                        step="1000" />
                </div>

                <button class="btn-primary" onclick="saveStep1Data()">Next ‚Üí</button>
            </div>
        </div>

        <!-- Step 2: Investment Portfolio -->
        <div class="step" id="step2">
            <div class="step-content">
                <h1>Investment Portfolio</h1>
                <p class="subtitle">Do you have dividend-paying investments? Add your holdings to calculate monthly
                    income.</p>

                <div class="portfolio-section">
                    <div class="input-group">
                        <label>Total Portfolio Value:</label>
                        <input type="number" id="portfolioValue" placeholder="Total invested amount ($)"
                            class="input-field" min="0" step="1000" oninput="updateDividendIncome()">
                        <p class="input-hint">Enter the total current value of your dividend-paying investments</p>
                    </div>

                    <div class="input-group">
                        <label>Add your investments:</label>
                        <div class="ticker-input-row">
                            <input type="text" id="tickerSymbol" placeholder="Ticker Symbol (e.g., AAPL)"
                                class="input-field">
                            <input type="number" id="tickerPercent" placeholder="% of Portfolio" class="input-field"
                                min="0" max="100" step="0.1">
                            <button class="btn-secondary" onclick="addTicker()">Add</button>
                        </div>
                        <p class="input-hint" style="margin-top: 8px; color: var(--muted, #6b7280);">
                            Note: We currently support a limited set of ticker symbols. Full coverage coming soon.
                        </p>
                    </div>

                    <div id="tickerList" class="ticker-list"></div>

                    <div id="blendedYield" class="blended-yield-box" style="display: none;">
                        <h3>Your Portfolio Summary</h3>
                        <div class="yield-display">
                            <div class="yield-stat">
                                <span class="yield-label">Blended Yield</span>
                                <span class="yield-value" id="yieldValue">0.00%</span>
                            </div>
                            <div class="yield-stat">
                                <span class="yield-label">Monthly Dividend Income</span>
                                <span class="yield-value income-highlight" id="monthlyDividendIncome">$0.00</span>
                            </div>
                        </div>
                        <p class="yield-explanation">Based on your portfolio value and blended yield</p>
                    </div>
                </div>

                <div class="button-group">
                    <button class="btn-secondary" onclick="prevStep()">‚Üê Back</button>
                    <button class="btn-primary" onclick="nextStep()">Next ‚Üí</button>
                </div>
            </div>
        </div>

        <!-- Step 3: Rental Income -->
        <div class="step" id="step3">
            <div class="step-content">
                <h1>Real Estate & Housing</h1>
                <p class="subtitle">Track your properties and their financial details</p>

                <div class="house-section">
                    <div class="house-form-card">
                        <h3>Add a Property</h3>

                        <div class="form-group">
                            <label for="houseType">Property Type</label>
                            <select id="houseType" class="input-field">
                                <option value="">Select type...</option>
                                <option value="primary">Primary Residence</option>
                                <option value="rental">Rental Property</option>
                                <option value="vacation">Vacation Home</option>
                                <option value="investment">Investment Property</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="houseName">Property Name/Address</label>
                            <input type="text" id="houseName" class="input-field"
                                placeholder="e.g., Main Street House, Downtown Condo" />
                        </div>

                        <div class="form-group">
                            <label>Is this property paid off?</label>
                            <div class="radio-group">
                                <label class="radio-option">
                                    <input type="radio" name="paidOffStatus" value="yes" checked />
                                    <span>Yes, paid off</span>
                                </label>
                                <label class="radio-option">
                                    <input type="radio" name="paidOffStatus" value="no" />
                                    <span>No, has mortgage</span>
                                </label>
                            </div>
                        </div>

                        <div class="form-group" id="paidOffGroup">
                            <label for="houseEstimate">Estimated Property Value</label>
                            <input type="number" id="houseEstimate" class="input-field" placeholder="500000" min="0"
                                step="10000" />
                            <p class="field-hint">Don't know the value? Ask our AI Assistant for an estimate based on
                                your location and property type.</p>
                        </div>

                        <div class="form-group" id="mortgageGroup" style="display: none;">
                            <label for="homeEquity">Current Home Equity</label>
                            <input type="number" id="homeEquity" class="input-field" placeholder="200000" min="0"
                                step="10000" />
                            <p class="field-hint">Your current ownership stake in the property (property value -
                                remaining loan balance)</p>
                        </div>

                        <div class="form-group" id="mortgagePaymentGroup" style="display: none;">
                            <label for="mortgagePayment">Monthly Mortgage Payment</label>
                            <input type="number" id="mortgagePayment" class="input-field" placeholder="2500" min="0"
                                step="100" />
                        </div>

                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="generatesRental" />
                                <span>This property generates rental income</span>
                            </label>
                        </div>

                        <div class="form-group" id="rentalIncomeGroup" style="display: none;">
                            <label for="monthlyRentalIncome">Monthly Rental Income</label>
                            <input type="number" id="monthlyRentalIncome" class="input-field" placeholder="3000" min="0"
                                step="100" />
                        </div>

                        <button class="btn-secondary" onclick="addHouse()">+ Add Property</button>
                    </div>

                    <div id="houseList" class="house-list"></div>

                    <div id="houseSummary" class="summary-box" style="display: none;">
                        <div class="summary-row">
                            <span>Total Properties:</span>
                            <span class="summary-value" id="totalHousesCount">0</span>
                        </div>
                        <div class="summary-row">
                            <span>Total Property Value:</span>
                            <span class="summary-value" id="totalPropertyValue">$0</span>
                        </div>
                        <div class="summary-row">
                            <span>Total Monthly Rental Income:</span>
                            <span class="summary-value income-highlight" id="totalRentalIncome">$0</span>
                        </div>
                    </div>
                </div>

                <div class="button-group">
                    <button class="btn-secondary" onclick="prevStep()">‚Üê Back</button>
                    <button class="btn-primary" onclick="nextStep()">Next ‚Üí</button>
                </div>
            </div>
        </div>

        <!-- Step 4: Retirement Accounts -->
        <div class="step" id="step4">
            <div class="step-content">
                <h1>Retirement Accounts</h1>
                <p class="subtitle">Track your 401(k), IRA, Roth IRA, and other retirement savings</p>

                <div class="retirement-input-section">
                    <div class="input-row">
                        <select id="retirementAccountType" class="input-field">
                            <option value="">Select account type...</option>
                            <option value="401k">401(k)</option>
                            <option value="roth-ira">Roth IRA</option>
                            <option value="traditional-ira">Traditional IRA</option>
                            <option value="403b">403(b)</option>
                            <option value="sep-ira">SEP IRA</option>
                            <option value="simple-ira">SIMPLE IRA</option>
                            <option value="pension">Pension</option>
                            <option value="other">Other</option>
                        </select>
                        <input type="number" id="retirementAccountBalance" class="input-field"
                            placeholder="Current balance" min="0" step="1000">
                        <button class="btn-secondary" onclick="addRetirementAccount()">Add</button>
                    </div>
                </div>

                <div id="retirementList" class="list-container"></div>

                <div id="totalRetirement" class="total-box" style="display: none;">
                    <span>Total Retirement Savings:</span>
                    <span class="total-value" id="totalRetirementValue">$0.00</span>
                </div>

                <div class="button-group">
                    <button class="btn-secondary" onclick="prevStep()">‚Üê Back</button>
                    <button class="btn-primary" onclick="nextStep()">Next ‚Üí</button>
                </div>
            </div>
        </div>

        <!-- Step 5: Other Passive Income -->
        <div class="step" id="step5">
            <div class="step-content">
                <h1>Other Passive Income</h1>
                <p class="subtitle">Any other passive income sources? (Royalties, side businesses, etc.)</p>

                <div class="other-section">
                    <div class="input-group">
                        <label>Add other income sources:</label>
                        <div class="other-input-row">
                            <input type="text" id="otherName" placeholder="Income Source" class="input-field">
                            <input type="number" id="otherAmount" placeholder="Monthly Income ($)" class="input-field"
                                min="0" step="0.01">
                            <button class="btn-secondary" onclick="addOther()">Add</button>
                        </div>
                    </div>

                    <div id="otherList" class="income-list"></div>

                    <div id="totalOther" class="total-box" style="display: none;">
                        <span>Total Monthly Other Income:</span>
                        <span class="total-value" id="totalOtherValue">$0.00</span>
                    </div>
                </div>

                <div class="button-group">
                    <button class="btn-secondary" onclick="prevStep()">‚Üê Back</button>
                    <button class="btn-primary" onclick="nextStep()">Next ‚Üí</button>
                </div>
            </div>
        </div>

        <!-- Step 6: Monthly Expenses -->
        <div class="step" id="step6">
            <div class="step-content">
                <h1>Monthly Expenses</h1>
                <p class="subtitle">List all your essential monthly expenses, feel free to exclude mortgage</p>

                <div class="expenses-section">
                    <div class="input-group">
                        <label>Add your expenses:</label>
                        <div class="expense-input-row">
                            <input type="text" id="expenseName" placeholder="Expense Name (e.g., Rent)"
                                class="input-field">
                            <input type="number" id="expenseAmount" placeholder="Monthly Amount ($)" class="input-field"
                                min="0" step="0.01">
                            <button class="btn-secondary" onclick="addExpense()">Add</button>
                        </div>
                    </div>

                    <div id="expenseList" class="expense-list"></div>

                    <div id="totalExpenses" class="total-box" style="display: none;">
                        <span>Total Monthly Expenses:</span>
                        <span class="total-value" id="totalExpensesValue">$0.00</span>
                    </div>
                </div>

                <div class="button-group">
                    <button class="btn-secondary" onclick="prevStep()">‚Üê Back</button>
                    <button class="btn-primary" onclick="nextStep()">Next ‚Üí</button>
                </div>
            </div>
        </div>

        <!-- Step 7: Calculating Goals -->
        <div class="step" id="step7">
            <div class="step-content">
                <div class="calculating-container">
                    <div class="spinner" id="calcSpinner"></div>
                    <h1 id="calcHeader">Setting Up your Financial Independence numbers</h1>
                    <p class="calculating-text">Analyzing your income streams and expenses...</p>
                    <div class="calculating-steps">
                        <div class="calc-step" id="calcStep1" style="display:none;">‚úì Calculating portfolio passive
                            income
                        </div>
                        <div class="calc-step" id="calcStep2" style="display:none;">‚úì Calculating total annual income
                        </div>
                        <div class="calc-step" id="calcStep3" style="display:none;">‚úì Calculating total monthly expenses
                        </div>
                        <div class="calc-step" id="calcStep4" style="display:none;">‚úì Calculating FIRE number</div>
                        <div class="calc-step" id="calcStep5" style="display:none;">‚úì Calculating Financial independence
                            year</div>
                    </div>

                    <!-- Lightweight signup CTA (non-primary styling) -->
                    <div class="info-banner" id="signupBanner"
                        style="display:none; margin-top:16px; padding:12px 14px; border:1px solid rgba(0,0,0,0.08); border-radius:10px; background: linear-gradient(0deg, rgba(0,0,0,0.02), rgba(0,0,0,0.02)), #fff; align-items:center; justify-content:space-between; gap:12px;">
                        <div style="font-size:14px; color:#374151; text-align:left;">
                            Sign Up to save your financial independence numbers
                        </div>
                        <div style="display:flex; align-items:center; gap:8px;">
                            <a href="/signup"
                                style="font-size:14px; padding:8px 16px; border-radius:8px; border:none; background:#3b82f6; color:#ffffff; text-decoration:none; font-weight:500;">
                                Create
                            </a>
                            <button type="button" onclick="dismissStep6Banner()"
                                style="font-size:14px; padding:8px 10px; border-radius:8px; border:1px solid rgba(0,0,0,0.12); background:#f9fafb; color:#374151; cursor:pointer;">
                                Dismiss
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Step 8: Dashboard -->
        <div class="step" id="step8">
            <div class="dashboard">
                <!-- Top Section: Income & Expense Summary -->
                <div class="dashboard-summary">
                    <div class="summary-section">
                        <h2 class="dashboard-title">Your Financial Independence Dashboard</h2>
                        <div class="summary-grid">
                            <div class="summary-item clickable" onclick="openIncomeModal()">
                                <span class="summary-label">Total Monthly Income</span>
                                <span class="summary-amount income" id="dashTotalIncome">$0</span>
                                <div class="summary-breakdown" id="incomeBreakdown"></div>
                            </div>
                            <div class="summary-item clickable" onclick="openExpenseModal()">
                                <span class="summary-label">Total Monthly Expenses</span>
                                <span class="summary-amount expense" id="dashTotalExpenses">$0</span>
                                <div class="summary-breakdown" id="expenseBreakdown"></div>
                            </div>
                            <div class="summary-item highlight">
                                <span class="summary-label">Savings Rate</span>
                                <span class="summary-amount" id="dashGoalsAchieved">0%</span>
                            </div>
                            <div class="summary-item highlight clickable" onclick="openFireModal()">
                                <span class="summary-label">FIRE Number</span>
                                <span class="summary-amount" id="dashFIPercentage">$0</span>
                                <div class="summary-breakdown">4% withdrawal rule</div>
                            </div>
                            <div class="summary-item highlight clickable" onclick="openFIYearModal()">
                                <span class="summary-label">Projected FI Year</span>
                                <span class="summary-amount" id="dashProjectedFIYear">Never</span>
                                <div class="summary-breakdown">at 5% annual return</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Middle Section: Next Goal Highlight -->
                <div class="next-goal-compact" id="nextGoalCompact">
                    <div class="next-goal-info">
                        <span class="next-goal-label">NEXT MILESTONE</span>
                        <h3 id="nextGoalTitleCompact">Loading...</h3>
                        <div class="next-goal-stats">
                            <div class="stat-item">
                                <span class="stat-label">Target</span>
                                <span class="stat-value" id="nextGoalTargetCompact">$0</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Net Worth</span>
                                <span class="stat-value highlight" id="nextGoalCurrentPortfolio">$0</span>
                            </div>
                            <!-- <div class="stat-item">
                                <span class="stat-label">Portfolio Needed</span>
                                <span class="stat-value" id="nextGoalPortfolioNeeded">$0</span>
                            </div> -->
                            <div class="stat-item">
                                <span class="stat-label">Additional Investment</span>
                                <span class="stat-value accent" id="nextGoalAdditionalInvestment">$0</span>
                            </div>
                        </div>
                    </div>
                    <div class="next-goal-progress-compact">
                        <div class="progress-circle" id="progressCircle">
                            <span class="progress-percentage" id="progressPercentage">0%</span>
                        </div>
                    </div>
                </div>

                <!-- Bottom Section: All Goals Grid -->
                <div class="goals-section-compact">
                    <h3 class="section-subtitle">All Milestones</h3>
                    <div class="goals-grid-compact" id="goalsGridCompact">
                        <!-- Goals will be dynamically inserted here -->
                    </div>
                </div>

                <!-- Action Button -->
                <div class="dashboard-actions">
                    <a href="/signup" class="btn-primary">Sign Up</a>
                    <button class="btn-secondary" onclick="resetApp()">Start Over</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Expense Edit Modal -->
    <div class="modal-overlay" id="expenseEditModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Monthly Expenses</h2>
                <button class="modal-close" onclick="closeExpenseModal()">&times;</button>
            </div>

            <!-- Tab Navigation -->
            <div class="modal-tabs">
                <button class="tab-button active" id="tabExpenseOverview" onclick="switchExpenseTab('overview')">üìä
                    Overview</button>
                <button class="tab-button" id="tabExpenseEdit" onclick="switchExpenseTab('edit')">‚úèÔ∏è Edit</button>
            </div>

            <div class="modal-body">
                <!-- Overview Tab Content -->
                <div class="tab-content active" id="contentExpenseOverview">
                    <div class="expense-chart-container"
                        style="padding: 16px; background: #f9fafb; border-radius: 12px;">
                        <h3
                            style="margin: 0 0 16px 0; font-size: 18px; font-weight: 600; color: #374151; text-align: center;">
                            Monthly Expense Breakdown</h3>
                        <div style="max-width: 350px; margin: 0 auto;">
                            <canvas id="expenseBreakdownChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Edit Tab Content -->
                <div class="tab-content" id="contentExpenseEdit">
                    <div class="expense-edit-list" id="expenseEditList">
                        <!-- Expenses will be populated here -->
                    </div>
                    <div class="add-expense-row">
                        <input type="text" id="modalExpenseName" placeholder="Expense Name" class="input-field">
                        <input type="number" id="modalExpenseAmount" placeholder="Amount ($)" class="input-field"
                            min="0" step="10">
                        <button class="btn-secondary" onclick="addExpenseFromModal()">Add</button>
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button class="btn-secondary" onclick="closeExpenseModal()">Cancel</button>
                <button class="btn-primary" onclick="saveExpenseChanges()">Save Changes</button>
            </div>
        </div>
    </div>

    <!-- Income Edit Modal -->
    <div class="modal-overlay" id="incomeEditModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Assets/Income</h2>
                <button class="modal-close" onclick="closeIncomeModal()">&times;</button>
            </div>

            <!-- Tab Navigation -->
            <div class="modal-tabs">
                <button class="tab-button active" id="tabOverview" onclick="switchIncomeTab('overview')">üìä
                    Overview</button>
                <button class="tab-button" id="tabJob" onclick="switchIncomeTab('job')">üíº Job Income</button>
                <button class="tab-button" id="tabStocks" onclick="switchIncomeTab('stocks')">üìà Stocks</button>
                <button class="tab-button" id="tabRental" onclick="switchIncomeTab('rental')">üè† Rental</button>
                <button class="tab-button" id="tabOther" onclick="switchIncomeTab('other')">üí∞ Other</button>
            </div>

            <div class="modal-body">
                <!-- Overview Tab Content -->
                <div class="tab-content active" id="contentOverview">
                    <div class="income-chart-container"
                        style="padding: 16px; background: #f9fafb; border-radius: 12px;">
                        <h3
                            style="margin: 0 0 16px 0; font-size: 18px; font-weight: 600; color: #374151; text-align: center;">
                            Monthly Income Breakdown</h3>
                        <div style="max-width: 350px; margin: 0 auto;">
                            <canvas id="incomeBreakdownChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Job Income Tab Content -->
                <div class="tab-content active" id="contentJob">
                    <label for="modalJobIncome"
                        style="display: block; margin-bottom: 8px; font-weight: 500; color: #374151;">Annual Income from
                        Job(s):</label>
                    <div class="job-income-edit-item"
                        style="display: flex; gap: 12px; align-items: center; padding: 12px; border: 1px solid #e5e7eb; border-radius: 8px; background: #f9fafb;">
                        <input type="number" id="modalJobIncome" class="input-field" min="0" step="1000"
                            placeholder="Annual Income" style="flex: 1; max-width: 200px;">
                        <span class="stock-income" id="jobIncomeMonthly"
                            style="color: #3b82f6; font-weight: 600; min-width: 100px;">$0/mo</span>
                    </div>
                </div>

                <!-- Stocks Tab Content -->
                <div class="tab-content" id="contentStocks">
                    <div class="income-edit-list" id="stockEditList">
                        <!-- Stocks will be populated here -->
                    </div>
                    <div class="add-income-row">
                        <input type="text" id="modalStockSymbol" placeholder="Ticker Symbol" class="input-field">
                        <input type="number" id="modalStockPercent" placeholder="% of Portfolio" class="input-field"
                            min="0" max="100" step="1">
                        <button class="btn-secondary" onclick="addStockFromModal()">Add</button>
                    </div>
                </div>

                <!-- Rental Tab Content -->
                <div class="tab-content" id="contentRental">
                    <div class="income-edit-list" id="rentalEditList">
                        <!-- Rental properties will be populated here -->
                    </div>
                    <div class="add-income-row">
                        <input type="text" id="modalRentalName" placeholder="Property Name" class="input-field">
                        <input type="number" id="modalRentalAmount" placeholder="Monthly Income ($)" class="input-field"
                            min="0" step="10">
                        <button class="btn-secondary" onclick="addRentalFromModal()">Add</button>
                    </div>
                </div>

                <!-- Other Income Tab Content -->
                <div class="tab-content" id="contentOther">
                    <div class="income-edit-list" id="otherEditList">
                        <!-- Other income sources will be populated here -->
                    </div>
                    <div class="add-income-row">
                        <input type="text" id="modalOtherName" placeholder="Income Source" class="input-field">
                        <input type="number" id="modalOtherAmount" placeholder="Monthly Income ($)" class="input-field"
                            min="0" step="10">
                        <button class="btn-secondary" onclick="addOtherFromModal()">Add</button>
                    </div>
                </div>


            </div>

            <div class="modal-footer">
                <button class="btn-secondary" onclick="closeIncomeModal()">Cancel</button>
                <button class="btn-primary" onclick="saveIncomeChanges()">Save Changes</button>
            </div>
        </div>
    </div>

    <!-- FIRE Number Explanation Modal -->
    <div class="modal-overlay" id="fireExplanationModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Your FIRE Number Explained</h2>
                <button class="modal-close" onclick="closeFireModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="fire-explanation">
                    <div class="fire-intro">
                        <p>Your <strong>FIRE Number</strong> is the total amount you need invested to achieve
                            Financial
                            Independence and Retire Early (FIRE). It's calculated using the <strong>4% Safe
                                Withdrawal
                                Rule</strong>.</p>
                    </div>

                    <div class="fire-calculation">
                        <h3>Here's how we calculated your FIRE Number:</h3>
                        <div class="calculation-steps">
                            <div class="calc-step">
                                <div class="step-label">1. Your Monthly Expenses:</div>
                                <div class="step-value" id="fireModalExpenses">$0</div>
                            </div>
                            <div class="calc-step">
                                <div class="step-label">2. Annual Expenses (Monthly √ó 12):</div>
                                <div class="step-value" id="fireModalAnnualExpenses">$0</div>
                            </div>
                            <div class="calc-step">
                                <div class="step-label">3. FIRE Number (Annual Expenses √∑ 4%):</div>
                                <div class="step-value highlight" id="fireModalFireNumber">$0</div>
                            </div>
                        </div>
                    </div>

                    <div class="fire-explanation-text">
                        <h3>What does this mean?</h3>
                        <p>Once you have <span id="fireModalFireNumberText">$0</span> invested, you can safely
                            withdraw
                            4% per year (<span id="fireModalAnnualWithdrawal">$0</span>) to cover your expenses
                            without
                            touching the principal. This means you're financially independent!</p>

                        <div class="fire-progress">
                            <h4>Your Progress:</h4>
                            <div class="progress-item">
                                <span>Current Net Worth:</span>
                                <span id="fireModalCurrentNetWorth">$0</span>
                            </div>
                            <div class="progress-item">
                                <span>Growing Assets (Portfolio):</span>
                                <span id="fireModalGrowingAssets">$0</span>
                            </div>
                            <div class="progress-item">
                                <span>Still Need:</span>
                                <span id="fireModalStillNeed">$0</span>
                            </div>
                            <div class="progress-item">
                                <span>Progress:</span>
                                <span id="fireModalProgress">0%</span>
                            </div>
                        </div>
                    </div>

                    <div class="fire-customization">
                        <div class="customization-note">
                            <p><strong>Want to try different withdrawal rates?</strong></p>
                            <p>The 4% rule is conservative. Some people use 3.5% for extra safety or 4.5% for a more
                                aggressive approach.</p>
                            <button class="btn-secondary" onclick="showSwrCustomization()" disabled>
                                Customize Withdrawal Rate (Coming Soon)
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-primary" onclick="closeFireModal()">Got It!</button>
            </div>
        </div>
    </div>

    <!-- Projected FI Year Explanation Modal -->
    <div class="modal-overlay" id="fiYearExplanationModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Your Projected FI Year Explained</h2>
                <button class="modal-close" onclick="closeFIYearModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="fire-explanation">
                    <div class="fire-intro">
                        <p>Your <strong>Projected FI Year</strong> is when you're expected to reach Financial
                            Independence based on your current savings rate and investment returns. This calculation
                            assumes a <strong>5% annual real return</strong> after inflation.</p>
                    </div>

                    <div class="fire-calculation">
                        <h3>Here's how we calculated your FI timeline:</h3>
                        <div class="calculation-steps">
                            <div class="calc-step">
                                <div class="step-label">1. Your FIRE Number Target:</div>
                                <div class="step-value" id="fiYearModalFireNumber">$0</div>
                            </div>
                            <div class="calc-step">
                                <div class="step-label">2. Current Net Worth:</div>
                                <div class="step-value" id="fiYearModalCurrentNetWorth">$0</div>
                            </div>
                            <div class="calc-step">
                                <div class="step-label">3. Monthly Savings:</div>
                                <div class="step-value" id="fiYearModalMonthlySavings">$0</div>
                            </div>
                            <div class="calc-step">
                                <div class="step-label">4. Expected Annual Return:</div>
                                <div class="step-value">5.0%</div>
                            </div>
                            <div class="calc-step">
                                <div class="step-label">5. Projected FI Year:</div>
                                <div class="step-value highlight" id="fiYearModalProjectedYear">Never</div>
                            </div>
                        </div>
                    </div>

                    <div class="fire-explanation-text">
                        <h3>What does this mean?</h3>
                        <p id="fiYearModalExplanation">Based on your current savings and investment strategy, you're
                            projected to reach financial independence in <span id="fiYearModalYearsToGo">0</span>
                            years.
                        </p>

                        <div class="fire-progress">
                            <h4>Your Investment Journey:</h4>
                            <div class="progress-item">
                                <span>Starting Point:</span>
                                <span id="fiYearModalStartingPoint">$0</span>
                            </div>
                            <div class="progress-item">
                                <span>Monthly Contributions:</span>
                                <span id="fiYearModalMonthlyContrib">$0</span>
                            </div>
                            <div class="progress-item">
                                <span>Compound Growth:</span>
                                <span>5% annually</span>
                            </div>
                            <div class="progress-item">
                                <span>Final Portfolio Value:</span>
                                <span id="fiYearModalFinalValue">$0</span>
                            </div>
                        </div>
                    </div>

                    <div class="fire-customization">
                        <div class="customization-note">
                            <p><strong>Want to reach FI faster?</strong></p>
                            <p>Try increasing your savings rate, optimizing your investment returns, or reducing
                                your
                                expenses. Small changes can have a big impact over time!</p>
                            <button class="btn-secondary" onclick="showFIOptimization()" disabled>
                                Optimize Your FI Timeline (Coming Soon)
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-primary" onclick="closeFIYearModal()">Got It!</button>
            </div>
        </div>
    </div>

    <!-- AI Chatbot Widget -->
    <div class="chatbot-container minimized" id="chatbotContainer">
        <div class="chatbot-header" onclick="toggleChatbot()">
            <div class="chatbot-title">
                <span class="chatbot-icon">ü§ñ</span>
                <span>AI Assistant</span>
            </div>
            <button class="chatbot-minimize">‚àí</button>
        </div>
        <div class="chatbot-body" id="chatbotBody">
            <div class="chatbot-messages" id="chatbotMessages">
                <div class="chatbot-message bot-message">
                    <div class="message-content" id="welcomeMessage">

                    </div>
                </div>
            </div>
            <div class="chatbot-input-container">
                <input type="text" class="chatbot-input" id="chatbotInput" placeholder="Ask me anything..." />
                <button class="chatbot-send" onclick="sendChatMessage()">
                    <span>‚Üí</span>
                </button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
    <script src="config.js"></script>
    <!-- Markdown rendering and sanitization for chatbot -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dompurify@3.1.6/dist/purify.min.js"></script>
    <!-- KaTeX for math rendering -->
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"
        integrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8"
        crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"
        integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05"
        crossorigin="anonymous"></script>
    <script src="app.js"></script>
</body>

</html>